<template>
  <CreateAuctionHeader class="mb-4" />
  <div class="wrapper wrapper__sketch">
    <div class="d-flex large-checkbox">
      <div class="col-3">
        <div class="radio-box position-relative">
          <input
            name="type"
            type="radio"
            v-model="type"
            :value="'sketchAuction'"
            :id="`input-${clientSketchAuctionId}`"
          />
          <label :for="`input-${clientSketchAuctionId}`"
            ><OkCircled class="w-100"
          /></label>
        </div>
      </div>
      <div class="col-9">
        <h4 class="text-white title">
          –£–∑–Ω–∞—Ç—å —Å—Ç–æ–∏–º–æ—Å—Ç—å —Ç–∞—Ç—É–∏—Ä–æ–≤–∫–∏ –ø–æ —ç—Å–∫–∏–∑—É, –æ–ø–∏—Å–∞–Ω–∏—é
        </h4>
        <span class="secondary-text description"
          >–•–æ—á–µ—à—å –Ω–∞–±–∏—Ç—å —Ç–∞—Ç—É, –Ω–æ –Ω–µ –∑–Ω–∞–µ—à—å, –≤–æ —Å–∫–æ–ª—å–∫–æ —ç—Ç–æ –æ–±–æ–π–¥—ë—Ç—Å—è?</span
        >
        <span
          class="text-green"
          @click="sketchAuctionDescriptionVisible = true"
        >
          –ø–æ–¥—Ä–æ–±–Ω–µ–µ...</span
        >
      </div>
    </div>
  </div>
  <div class="wrapper wrapper__price">
    <div class="d-flex large-checkbox">
      <div class="col-3">
        <div class="radio-box position-relative">
          <input
            name="type"
            type="radio"
            v-model="type"
            :value="'priceAuction'"
            :id="`input-${clientPriceAuctionId}`"
          />
          <label :for="`input-${clientPriceAuctionId}`"
            ><OkCircled class="w-100"
          /></label>
        </div>
      </div>
      <div class="col-9">
        <h4 class="text-white title">–ù–∞–π—Ç–∏ –º–∞—Å—Ç–µ—Ä–∞ –ø–æ–¥ –º–æ–π –±—é–¥–∂–µ—Ç</h4>
        <span class="secondary-text description"
          >–ú–µ—á—Ç–∞–µ—à—å –æ –∫—Ä—É—Ç–æ–π —Ç–∞—Ç—É, –Ω–æ –±—é–¥–∂–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω?
        </span>
        <span
          class="text-purple"
          @click="priceAuctionDescriptionVisible = true"
        >
          –ø–æ–¥—Ä–æ–±–Ω–µ–µ...</span
        >
      </div>
    </div>
    <div class="price mt-3 text-center" v-if="type == AuctionTypesEnum.priceAuction">
      <span class="secondary-text"> –í–≤–µ–¥–∏—Ç–µ –∑–Ω–∞—á–µ–Ω–∏–µ –≤ —Ä—É–±–ª—è—Ö </span>
      <div >
        <InputItem
          class="mt-3 price-input text-center"
          :postfix="' ‚ÇΩ'"
          :centred="true"
          @input="setPrice"
        />
      </div>
    </div>
  </div>
  <AuctionNextStepButton @next="setData" />
  <DownModal
    :visible="sketchAuctionDescriptionVisible"
    @close="sketchAuctionDescriptionVisible = false"
    :color="'#0C445BB2'"
  >
    <div>
      <span class="text-white">
        –•–æ—á–µ—à—å –Ω–∞–±–∏—Ç—å —Ç–∞—Ç—É, –Ω–æ –Ω–µ –∑–Ω–∞–µ—à—å, –≤–æ —Å–∫–æ–ª—å–∫–æ —ç—Ç–æ –æ–±–æ–π–¥—ë—Ç—Å—è? –ó–∞–≥—Ä—É–∑–∏ —Ñ–æ—Ç–æ
        –∏–ª–∏ –æ–ø–∏—à–∏ –∏–¥–µ—é ‚Äì –∏ –ø–æ–ª—É—á–∏
        <b>–ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ—Ç –¥–µ—Å—è—Ç–∫–æ–≤ –º–∞—Å—Ç–µ—Ä–æ–≤ —Å —Ü–µ–Ω–∞–º–∏. </b> –ù–∏–∫–∞–∫–∏—Ö –¥–æ–≥–∞–¥–æ–∫,
        —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–∞—Å—Ü–µ–Ω–∫–∏!</span
      >
    </div>
    <div>
      <span class="text-white">
        <b>üîπ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?</b><br />
        <ul>
          <li>
            –í—ã–±–µ—Ä–∏ –≥–æ—Ä–æ–¥, —É–∫–∞–∂–∏ –º–µ—Å—Ç–æ, –≤—ã–±–µ—Ä–∏ —Ä–∞–∑–º–µ—Ä, –æ–ø–∏—à–∏ –∏–¥–µ—é –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å
            —ç—Å–∫–∏–∑ –ª–∏–±–æ –ø—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã
          </li>
          <li>–ú–∞—Å—Ç–µ—Ä–∞ –æ—Ü–µ–Ω–∏–≤–∞—é—Ç —Ç–≤–æ—é –∑–∞—è–≤–∫—É –∏ –Ω–∞–∑—ã–≤–∞—é—Ç —Ü–µ–Ω—É</li>
          <li>
            –í—ã–±–∏—Ä–∞–µ—à—å –ª—É—á—à–µ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∏ –¥–æ–≥–æ–≤–∞—Ä–∏–≤–∞–µ—à—å—Å—è –Ω–∞–ø—Ä—è–º—É—é —Å –º–∞—Å—Ç–µ—Ä–æ–º –æ
            –¥–µ—Ç–∞–ª—è—Ö
          </li>
        </ul>
        üëâ –ë–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å –∫–∞–∂–¥–æ–º—É –º–∞—Å—Ç–µ—Ä—É –æ—Ç–¥–µ–ª—å–Ω–æ ‚Äì —Ü–µ–Ω—ã –ø—Ä–∏–¥—É—Ç –∫ —Ç–µ–±–µ
        –ø—Ä—è–º–æ —Å—é–¥–∞!
      </span>
    </div>
  </DownModal>
  <DownModal
    :visible="priceAuctionDescriptionVisible"
    @close="priceAuctionDescriptionVisible = false"
    :color="'#0C445BB2'"
  >
    <span class="text-white">
      –ú–µ—á—Ç–∞–µ—à—å –æ –∫—Ä—É—Ç–æ–π —Ç–∞—Ç—É, –Ω–æ –±—é–¥–∂–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω? –£–∫–∞–∂–∏ —Å—É–º–º—É, –∫–æ—Ç–æ—Ä—É—é –≥–æ—Ç–æ–≤
      –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å, –∏ <b>–Ω–∞–π–¥–∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∞ –≤ —Å–≤–æ–µ–π —Ü–µ–Ω–æ–≤–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏.</b> <br />
      üîπ –ü–æ—á–µ–º—É —ç—Ç–æ
      <ul>
        <li>–§–∏–ª—å—Ç—Ä—É–µ—à—å –º–∞—Å—Ç–µ—Ä–æ–≤ –ø–æ —Å–≤–æ–∏–º —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º</li>
        <li>–í–∏–¥–∏—à—å —É—Ä–æ–≤–µ–Ω—å –º–∞—Å—Ç–µ—Ä–æ–≤ –∏–º–µ–Ω–Ω–æ –≤ —Ç–≤–æ—ë–º –±—é–¥–∂–µ—Ç–µ</li>
        <li>
          –≠–∫–æ–Ω–æ–º–∏—è –≤—Ä–µ–º–µ–Ω–∏ ‚Äì –Ω–µ —Ç—Ä–∞—Ç–∏—à—å –µ–≥–æ –Ω–∞ –º–∞—Å—Ç–µ—Ä–æ–≤, —á—å–∏ —Ü–µ–Ω—ã —Ç–µ–±–µ –Ω–µ
          –ø–æ–¥–æ–π–¥—É—Ç
        </li>
      </ul>
      üëâ –¢–∞—Ç—É –º–µ—á—Ç—ã ‚Äì –±–µ–∑ –ø–µ—Ä–µ–ø–ª–∞—Ç!
    </span>
  </DownModal>
</template>

<script setup lang="ts">
import AuctionNextStepButton from "@/blocks/auction/CreateAuctionStates/AuctionNextStepButton.vue";
import { generateRandomString } from "@/utils/functions";
import OkCircled from "@/components/icons/OkCircled.vue";
import InputItem from "@/components/InputItem.vue";
import DownModal from "@/blocks/DownModal.vue";
import { ref } from "vue";
import CreateAuctionHeader from "../CreateAuctionHeader.vue";
import type { AuctionBuilder } from "@/utils/classes/AuctionInteractor";
import { AuctionTypesEnum } from "@/types/Auction";

const emits = defineEmits<{ next: [] }>();
const { auctionBuilder } = defineProps<{ auctionBuilder: AuctionBuilder }>();

const sketchAuctionDescriptionVisible = ref(false);
const priceAuctionDescriptionVisible = ref(false);
const price = ref<number>(0);
const type = ref<AuctionTypesEnum>(AuctionTypesEnum.sketchAuction);

const setPrice = (amount: Number | String) => {
  if (typeof amount === "string") {
    amount = Number(amount);
    if (Number.isNaN(amount)) return;
  }

  price.value = amount as number;
};

const setData = () => {
  auctionBuilder.setType(type.value);
  if (type.value === AuctionTypesEnum.priceAuction && price.value !== 0) {
    if (!price.value) return;
    auctionBuilder.setPrice(price.value);
  }
  emits("next");
};

const clientSketchAuctionId = generateRandomString(3);
const clientPriceAuctionId = generateRandomString(3);
</script>

<style scoped>
.large-checkbox .title {
  max-width: 200px;
}
.wrapper {
  background-color: #0d0d0d4d;
  padding: 24px;
  border-radius: 24px;
  margin: 5px 0;
}
.wrapper .description {
  line-height: 160%;
  font-size: 11px;
  letter-spacing: 2%;
}
.wrapper__price {
  margin-bottom: 70px;
}
.radio-box {
  width: 32px;
  height: 32px;
}

.price-input {
  border: 1px solid #bc2bff;
}

input[type="radio"] {
  appearance: none;
  position: relative;
  width: 32px;
  height: 32px;
  background: #0d0d0db2;
  border-radius: 24px;
  border: 3.5px solid #0c445bb2;
  transition: 500ms;
}

label {
  position: absolute;
  text-align: center;
  top: -8.3px;
  left: 0;
  font-size: 2em;
  display: none;
}

input[type="radio"]:checked + label {
  display: inline-block;
}

.wrapper__sketch input[type="radio"]:checked + label {
  color: #44f64199;
}

.wrapper__price input[type="radio"]:checked + label {
  color: #bc2bff;
}

.wrapper__sketch:has(input[type="radio"]:checked) {
  border: 1px solid #44f64199; /* –ó–∞–¥–∞–π—Ç–µ –Ω—É–∂–Ω—ã–π —Å—Ç–∏–ª—å –≥—Ä–∞–Ω–∏—Ü—ã */
}

.wrapper__price:has(input[type="radio"]:checked) {
  border: 1px solid #bc2bff; /* –ó–∞–¥–∞–π—Ç–µ –Ω—É–∂–Ω—ã–π —Å—Ç–∏–ª—å –≥—Ä–∞–Ω–∏—Ü—ã */
}

input[data-input-name="input-component"] {
  text-align: center;
}
</style>
